<html>
<head>
<title>Faraday Admin Panel</title>
<script src="http://faradaycam.dyn.wpi.edu:3000/socket.io/socket.io.js"></script>
<script>
  const socket = io();  socket.on('cmd', (data) => {
    document.getElementById('console').innerHTML = data;
  })

const submit = function( e ) {
    // prevent default form action from being carried out
    e.preventDefault()

    const jsonObj = {
      'nameOfLapse': document.querySelector('#nameOfLapse').value,
      'frameRate': document.querySelector('#frameRate').value,
      'maxFrames': document.querySelector('#maxFrames').value
    }

    const data = JSON.stringify(jsonObj)
    console.log(data)
    fetch( '/adminCompileLapse', {
      method:'POST',
      headers: { 'Content-Type': 'application/json' },
      body: data
    })
}

window.onload = function() {
    const button = document.querySelector( 'button' )
    button.onclick = submit
    
    const socket = io();
    socket.on('cmd', (data) => {
	document.getElementById('console').innerHTML = data;
  })
}

</script>

</head>
<body>
    <h1>Compile Timelapse</h1>
    <form>
        <input type="text" name="nameOfLapse" placeholder="myTimeLapse">
        <input type="text" name="frameRate" value="45">
        <input type="text" name="maxFrames" placeholder="Max Frames">
      </form>
      <button>Submit</button>
      <p>180 images/hr</p>
      <p id="console"></p>
    <br>
</body>
</html>
